{% comment %} {% extends 'base.html' %} {% block content %}
<header>
	<h1>Budget Splitter - Input Form</h1>
</header>
<main>
	<form method="post">
		{% csrf_token %} {{ form.as_p }}
		<label for="num_incomes">Number of Incomes:</label>
		<input type="number" id="num_incomes" name="num_incomes" />
		<div id="expense_container"></div>
		<button type="submit">Submit</button>
	</form>
</main>
<script>
	document.addEventListener('DOMContentLoaded', function () {
		const numIncomes = document.getElementById('num_incomes');
		const expensContainer = document.getElementById('expense_container');

		numIncomesInput.addEventListener('input', function () {
			const numIncomes = parseInt(numIncomesInput.value);
			expensContainer.innerHTML = '';

			for (let i = 0; i < numIncomes; i++) {
				const expensesField = document.createElement('input');
				expensesField.type = 'text';
				expensesField.name = 'expenses_${i}';
				expensesField.placeholder = 'Expenses for Income ${i + 1}';
				expensContainer.appendChild(expensesField);
				expensContainer.appendChild(document.createElement('br'));
			}
		});
	});
</script>
{% endblock %} {% endcomment %}

{% extends 'base.html' %}

{% block content %}
  <form id="input-form" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="button" id="add-fields">Add Incomes and Expenses</button>
    <button type="submit">Submit</button>
  </form>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.querySelector('#input-form');
      const addFieldsButton = document.querySelector('#add-fields');

      addFieldsButton.addEventListener('click', function() {
        const numIncomes = parseInt(document.querySelector('#id_num_incomes').value);

        for (let i = 0; i < numIncomes; i++) {
          const incomeInput = document.createElement('input');
          incomeInput.type = 'text';
          incomeInput.name = `incomes_${i}`;
          incomeInput.placeholder = 'Income ' + (i + 1);
          
          const expensesInput = document.createElement('input');
          expensesInput.type = 'text';
          expensesInput.name = `expenses_${i}`;
          expensesInput.placeholder = 'Expenses ' + (i + 1);

          form.insertBefore(incomeInput, addFieldsButton);
          form.insertBefore(expensesInput, addFieldsButton);
        }
      });
    });
  </script>
{% endblock %}

